// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: user_course.sql

package repo

import (
	"context"

	"github.com/google/uuid"
)

const addCourseToUser = `-- name: AddCourseToUser :exec
INSERT INTO t_user_courses 
    (user_auth_id, course_id, progress)
VALUES 
    ($1, $2, 
     (
        SELECT 
            ROUND(100.0 * COUNT(*) / (SELECT COUNT(*) FROM t_user_chapters WHERE course_id = $2), 2)
        FROM t_user_chapters
        WHERE course_id = $2 AND isFinished = true
     ))
`

type AddCourseToUserParams struct {
	UserAuthID uuid.UUID
	CourseID   uuid.UUID
}

func (q *Queries) AddCourseToUser(ctx context.Context, arg AddCourseToUserParams) error {
	_, err := q.db.ExecContext(ctx, addCourseToUser, arg.UserAuthID, arg.CourseID)
	return err
}
