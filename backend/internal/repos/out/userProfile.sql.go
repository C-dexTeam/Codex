// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: userProfile.sql

package repo

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
)

const changeLevel = `-- name: ChangeLevel :exec
UPDATE
    t_users_profile
SET
    level =  COALESCE($1::INTEGER, level),
    experience =  COALESCE($2::INTEGER, experience),
    next_level_Exp =  COALESCE($3::INTEGER, next_level_Exp)
WHERE
    id = $4
`

type ChangeLevelParams struct {
	Level         sql.NullInt32
	Experience    sql.NullInt32
	NextLevelExp  sql.NullInt32
	UserProfileID uuid.UUID
}

func (q *Queries) ChangeLevel(ctx context.Context, arg ChangeLevelParams) error {
	_, err := q.db.ExecContext(ctx, changeLevel,
		arg.Level,
		arg.Experience,
		arg.NextLevelExp,
		arg.UserProfileID,
	)
	return err
}

const changeRole = `-- name: ChangeRole :exec
UPDATE
    t_users_profile
SET
    role_id = $1
WHERE
    id = $2
`

type ChangeRoleParams struct {
	RoleID        uuid.UUID
	UserProfileID uuid.UUID
}

func (q *Queries) ChangeRole(ctx context.Context, arg ChangeRoleParams) error {
	_, err := q.db.ExecContext(ctx, changeRole, arg.RoleID, arg.UserProfileID)
	return err
}

const createUserProfile = `-- name: CreateUserProfile :exec
INSERT INTO
    t_users_profile (user_auth_id, role_id, name, surname)
VALUES
    ($1, $2, $3, $4)
`

type CreateUserProfileParams struct {
	UserAuthID uuid.UUID
	RoleID     uuid.UUID
	Name       sql.NullString
	Surname    sql.NullString
}

func (q *Queries) CreateUserProfile(ctx context.Context, arg CreateUserProfileParams) error {
	_, err := q.db.ExecContext(ctx, createUserProfile,
		arg.UserAuthID,
		arg.RoleID,
		arg.Name,
		arg.Surname,
	)
	return err
}

const getProfileByID = `-- name: GetProfileByID :one
SELECT 
    up.id, up.user_auth_id, up.role_id, up.name, up.surname, up.level, up.experience, up.next_level_exp, up.created_at, up.deleted_at 
FROM t_users_profile as up
WHERE
    up.id = $1
`

type GetProfileByIDRow struct {
	ID           uuid.UUID
	UserAuthID   uuid.UUID
	RoleID       uuid.UUID
	Name         sql.NullString
	Surname      sql.NullString
	Level        sql.NullInt32
	Experience   sql.NullInt32
	NextLevelExp sql.NullInt32
	CreatedAt    sql.NullTime
	DeletedAt    sql.NullTime
}

func (q *Queries) GetProfileByID(ctx context.Context, id uuid.UUID) (GetProfileByIDRow, error) {
	row := q.db.QueryRowContext(ctx, getProfileByID, id)
	var i GetProfileByIDRow
	err := row.Scan(
		&i.ID,
		&i.UserAuthID,
		&i.RoleID,
		&i.Name,
		&i.Surname,
		&i.Level,
		&i.Experience,
		&i.NextLevelExp,
		&i.CreatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const getProfiles = `-- name: GetProfiles :many
SELECT up.id, up.user_auth_id, up.role_id, up.name, up.surname, up.level, up.experience, up.next_level_exp,
       up.created_at, up.deleted_at 
FROM t_users_profile as up
WHERE
    ($1::text IS NULL OR us.id = $1) AND
    ($2::text IS NULL OR us.user_auth_id = $2) AND
    ($3::text IS NULL OR name ILIKE '%' || $3::text || '%') AND
    ($4::text IS NULL OR surname ILIKE '%' || $4::text || '%') AND
    ($5::integer IS NULL OR us.level = $5) AND
    ($6::integer IS NULL OR us.experience = $6) AND
    ($7::integer IS NULL OR us.next_level_exp = $7)
LIMIT $9 OFFSET $8
`

type GetProfilesParams struct {
	ID           sql.NullString
	UserAuthID   sql.NullString
	Name         sql.NullString
	Surname      sql.NullString
	Level        sql.NullInt32
	Experience   sql.NullInt32
	NextLevelExp sql.NullInt32
	Off          int32
	Lim          int32
}

type GetProfilesRow struct {
	ID           uuid.UUID
	UserAuthID   uuid.UUID
	RoleID       uuid.UUID
	Name         sql.NullString
	Surname      sql.NullString
	Level        sql.NullInt32
	Experience   sql.NullInt32
	NextLevelExp sql.NullInt32
	CreatedAt    sql.NullTime
	DeletedAt    sql.NullTime
}

func (q *Queries) GetProfiles(ctx context.Context, arg GetProfilesParams) ([]GetProfilesRow, error) {
	rows, err := q.db.QueryContext(ctx, getProfiles,
		arg.ID,
		arg.UserAuthID,
		arg.Name,
		arg.Surname,
		arg.Level,
		arg.Experience,
		arg.NextLevelExp,
		arg.Off,
		arg.Lim,
	)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetProfilesRow
	for rows.Next() {
		var i GetProfilesRow
		if err := rows.Scan(
			&i.ID,
			&i.UserAuthID,
			&i.RoleID,
			&i.Name,
			&i.Surname,
			&i.Level,
			&i.Experience,
			&i.NextLevelExp,
			&i.CreatedAt,
			&i.DeletedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const softDeleteUserProfile = `-- name: SoftDeleteUserProfile :exec
UPDATE
    t_users_profile
SET
    deleted_at = $1
WHERE
    id = $2
`

type SoftDeleteUserProfileParams struct {
	DeletedAt     sql.NullTime
	UserProfileID uuid.UUID
}

func (q *Queries) SoftDeleteUserProfile(ctx context.Context, arg SoftDeleteUserProfileParams) error {
	_, err := q.db.ExecContext(ctx, softDeleteUserProfile, arg.DeletedAt, arg.UserProfileID)
	return err
}

const updateUserProfile = `-- name: UpdateUserProfile :exec
UPDATE
    t_users_profile
SET
    name = COALESCE($1::TEXT, name),
    surname =  COALESCE($2::TEXT, surname)
WHERE
    id = $3
`

type UpdateUserProfileParams struct {
	Name          sql.NullString
	Surname       sql.NullString
	UserProfileID uuid.UUID
}

func (q *Queries) UpdateUserProfile(ctx context.Context, arg UpdateUserProfileParams) error {
	_, err := q.db.ExecContext(ctx, updateUserProfile, arg.Name, arg.Surname, arg.UserProfileID)
	return err
}
